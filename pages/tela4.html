<div id="tela4">
    <div id="topo"> 
        <img src="https://u-shar.github.io/Capsula-do-Tempo/img/logo.png" id="roboLogo">
        <h1 id="titulo">Carta para o Futuro</h1>
    </div>

    <div id="conteudo">
        <p id="desc1">Nós vamos te enviar sua carta ao final do curso de MBA e para isso precisamos de saber para quem e onde enviamos este tesouro.</p>

        <form id="formDadosPessoais">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" placeholder="Digite seu nome" class="form-control"> 

            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" placeholder="Digite seu e-mail" class="form-control"> 

            <label for="curso">Curso:</label>
            <select id="curso" name="curso" class="form-select">
                <option value="" selected disabled>Selecione seu curso</option>
                <option value="MBA FESA Ago. 2023 - Dez. 2024">MBA FESA Ago. 2023 - Dez. 2024</option>
                <option value="FEI - Administração">FEI - Administração</option>
                <option value="2024_2 - Inovação e Sustentabilidade">2024_2 - Inovação e Sustentabilidade</option>
                <option value="2025_2 - Inovação e Sustentabilidade">2025_2 - Inovação e Sustentabilidade</option>
            </select>

            <label for="disciplina">Disciplina:</label>
            <select id="disciplina" name="disciplina" class="form-select">
                <option value="" selected disabled>Selecione a disciplina</option>
                <option value="Inovação e Problemas Ambientais">Inovação e Problemas Ambientais</option>
                <option value="SIG">SIG</option>
                <option value="FEI 2024_2 - Business Experience II">FEI 2024_2 - Business Experience II</option>
                <option value="FEI 2024_2 - Inteligência Competitiva">FEI 2024_2 - Inteligência Competitiva</option>
            </select>

            <label for="mesFormacao">Mês de Formação:</label>
            <select id="mesFormacao" name="mesFormacao" class="form-select">
                <option value="" disabled selected>Selecione o Mês de Formação</option>
                <option value='1'>Janeiro</option>
                <option value='2'>Fevereiro</option>
                <option value='3'>Março</option>
                <option value='4'>Abril</option>
                <option value='5'>Maio</option>
                <option value='6'>Junho</option>
                <option value='7'>Julho</option>
                <option value='8'>Agosto</option>
                <option value='9'>Setembro</option>
                <option value='10'>Outubro</option>
                <option value='11'>Novembro</option>
                <option value='12'>Dezembro</option>
            </select>

            <label for="anoFormacao">Ano de Formação:</label>
            <select id="anoFormacao" name="anoFormacao" class="form-select">
                <option value="" disabled selected>Selecione o Ano de Formação</option>

            </select>
        </form>

        <p id="desc2">PS.: É importante dizer que não vamos ler a sua carta. Ela será transformada em um PDF e será enviada automaticamente para seu e-mail</p>

    </div>

    <div id="buttons">
        <button class="btn" id="buttonVoltar">Voltar</button>
        <button class="btn" id="buttonComecar">Iniciar Carta</button>
    </div>
</div>
<script>
    $(document).ready(function(){
        let nome = sessionStorage.getItem("Nome");
        let email = sessionStorage.getItem("Email");
        let curso = sessionStorage.getItem("Curso");
        let disciplina = sessionStorage.getItem("Disciplina");
        let anoFormacao = sessionStorage.getItem("AnoFormacao");
        let mesFormacao = sessionStorage.getItem("MesFormacao");

        let dataAtual = new Date();
        let anoAtual = dataAtual.getFullYear();

        for(let i = 0; i <= 6; i++){
            $("#anoFormacao").append(`<option value="${anoAtual + i}">${anoAtual + i}</option>`);
        }

        if(nome != null && nome != ""){
            $("#nome").val(nome);
        }

        if(email != null && email != ""){
            $("#email").val(email);
        }

        if(curso != null && curso != ""){
            $("#curso").val(curso);
            $("#curso").trigger("change");
        }

        if(disciplina != null && disciplina != ""){
            $("#disciplina").val(disciplina);
            $("#disciplina").trigger("change");
        }

        if(mesFormacao != null && mesFormacao != ""){
            $("#mesFormacao").val(mesFormacao);
            $("#mesFormacao").trigger("change");
        }

        if(anoFormacao != null && anoFormacao != ""){
            $("#anoFormacao").val(anoFormacao);
            $("#anoFormacao").trigger("change");
        }
    });

    $("#buttonVoltar").on("click", function(){
        let nome = $("#nome").val();
        let email = $("#email").val();
        let curso = $("#curso").val();
        let disciplina = $("#disciplina").val();
        let anoFormacao = $("#anoFormacao").val();
        let mesFormacao = $("#mesFormacao").val();

        sessionStorage.setItem("Nome", nome);
        sessionStorage.setItem("Email", email);
        sessionStorage.setItem("Curso", curso);
        sessionStorage.setItem("Disciplina", disciplina);
        sessionStorage.setItem("MesFormacao", mesFormacao);
        sessionStorage.setItem("AnoFormacao", anoFormacao);

        window.scrollTo(0, 0);
        $("#main").load("./pages/tela3.html");
    });

    $("#buttonComecar").on("click", function(){
        let nome = $("#nome").val();
        let email = $("#email").val();
        let curso = $("#curso").val();
        let disciplina = $("#disciplina").val();
        let anoFormacao = $("#anoFormacao").val();
        let mesFormacao = $("#mesFormacao").val();
        
        if(nome == "" || email == "" || curso == null || disciplina == null || anoFormacao == null || mesFormacao == null){
            Swal.fire({
                icon: 'warning',
                title: 'Atenção!',
                text: 'Preencha todos os campos',
            });
        }else{
            sessionStorage.setItem("Nome", nome);
            sessionStorage.setItem("Email", email);
            sessionStorage.setItem("Curso", curso);
            sessionStorage.setItem("Disciplina", disciplina);
            sessionStorage.setItem("MesFormacao", mesFormacao);
            sessionStorage.setItem("AnoFormacao", anoFormacao);

            window.scrollTo(0, 0);
            $("#main").load("./pages/tela5.html");
        }
    });
</script>
